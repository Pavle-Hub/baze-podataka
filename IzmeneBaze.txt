ALTER TABLE ALARMNI_SISTEM
DROP COLUMN OPSEG_FREKVENCIJE;

ALTER TABLE ALARMNI_SISTEM
ADD MIN_FREKVENCIJA INT;

ALTER TABLE ALARMNI_SISTEM
ADD MAX_FREKVENCIJA INT;
-- Izmenili smo ovo radi lakseg testiranja

ALTER TABLE BROJEVI_TELEFONA_REG_CNT
DROP CONSTRAINT PK_BRTEL_REG_CNT;

ALTER TABLE BROJEVI_TELEFONA_REG_CNT
ADD CONSTRAINT PK_BRTEL_REG_CNT PRIMARY KEY (ID_REG_CNT, BROJ_TELEFONA);
-- Uspeli smo da napravimo izmenu kod koje se pojavljivao error i uspesno smo dodali vise od jednog broja telefona

ALTER TABLE INTERVENCIJA
DROP CONSTRAINT SYS_C00361999;

ALTER TABLE INTERVENCIJA ADD (ID NUMBER);
ALTER TABLE INTERVENCIJA ADD CONSTRAINT PK_INTERVENCIJA PRIMARY KEY (ID);
-- Uprostili smo tabelu intervencija tako da imamo surogat kljuc (id)

ALTER TABLE ODRZAVANJE
DROP CONSTRAINT SYS_C00362003;

ALTER TABLE ODRZAVANJE ADD (ID NUMBER);
ALTER TABLE ODRZAVANJE ADD CONSTRAINT PK_ODRZAVANJE PRIMARY KEY (ID);
--Uprostili smo i tabelu Odrzavanje na isti nacin

ALTER TABLE BROJEVI_TELEFONA_OBJ
ADD ID_TELEFON INT;

ALTER TABLE BROJEVI_TELEFONA_OBJ
DROP CONSTRAINT SYS_C00362007;

ALTER TABLE BROJEVI_TELEFONA_OBJ
ADD CONSTRAINT BR_TEL_OBJ_PK PRIMARY KEY (ID_TELEFON);
--Uprostili smo i tabelu BROJEVI_TELEFONA_OBJ na isti nacin

ALTER TABLE BROJEVI_TELEFONA_REG_CNT
ADD ID_TELEFON INT;

ALTER TABLE BROJEVI_TELEFONA_REG_CNT
DROP CONSTRAINT PK_BRTEL_REG_CNT;

ALTER TABLE BROJEVI_TELEFONA_REG_CNT
ADD CONSTRAINT BR_TEL_REG_CNT_PK PRIMARY KEY (ID_TELEFON);
--Uprostili smo i tabelu BROJEVI_TELEFONA_REG_CNT na isti nacin

ALTER TABLE GRADOVI_MENADZER
ADD ID_GRADA INT;

ALTER TABLE GRADOVI_MENADZER
DROP CONSTRAINT SYS_C00361956;

ALTER TABLE GRADOVI_MENADZER
ADD CONSTRAINT GRADOVI_MENADZER_PK PRIMARY KEY (ID_GRADA);
--Uprostili smo i tabelu GRADOVI_MENADZER na isti nacin

ALTER TABLE IMENA_GRADOVA_REG_CNT
ADD ID_GRADA INT;

ALTER TABLE IMENA_GRADOVA_REG_CNT
DROP CONSTRAINT SYS_C00361960;

ALTER TABLE IMENA_GRADOVA_REG_CNT
ADD CONSTRAINT GRADOVI_REG_CNT_PK PRIMARY KEY (ID_GRADA);
--Uprostili smo i tabelu IMENA_GRADOVA_REG_CNT na isti nacin

ALTER TABLE OBJEKAT
DROP COLUMN ID_SMENE;

ALTER TABLE SMENA
DROP COLUMN ID_OBJEKTA;
--Brisali smo ove kolone i tabelu ISTORIJA_SMENE jer cemo da napravimo novu tabelu OBUHVATANJE koja ukazuje i na objekat i na smenu sto ce da predstavlja bolju verziju istorije smene

CREATE TABLE OBUHVATANJE(
    ID INT PRIMARY KEY,
    ID_SMENE INT NOT NULL,
    ID_OBJEKTA INT NOT NULL,
    FOREIGN KEY (ID_SMENE) REFERENCES SMENA(ID_SMENE),
    FOREIGN KEY (ID_OBJEKTA) REFERENCES OBJEKAT(ID_OBJEKTA)
);
--evo je ta tabela

ALTER TABLE EKIPA
DROP CONSTRAINT SYS_C00361972;

ALTER TABLE EKIPA
ADD CONSTRAINT FK_PARENT_ID FOREIGN KEY (MATICNI_BROJ_VODJE) REFERENCES FIZICKO_OBEZBEDJENJE(MATICNI_BROJ) ON DELETE SET NULL;
--Ovim smo omogucili da se prilikom brisanja fizickog obezbedjenja samo strani kljuc u tabeli Ekipa postavi na null

ALTER TABLE FIZICKO_OBEZBEDJENJE
DROP CONSTRAINT FK_EKIPA;

ALTER TABLE FIZICKO_OBEZBEDJENJE
ADD CONSTRAINT EKIPA_FK FOREIGN KEY (REDNI_BROJ_EKIPE) REFERENCES EKIPA(REDNI_BROJ) ON DELETE SET NULL;
--Isto i ovde sa druge strane

